<div>
  <h3>
    Add Product
  </h3>
  <a [routerLink]="['/addcategory']">Navigate to Category Section</a>
  <form [formGroup]="productForm" (ngSubmit)="productForm.valid && submitProduct()">
    <span style="color: red;" *ngIf="productForm.invalid">* Please fill all mandatory fields</span>
    <ion-grid>
      <ion-row>
        <ion-col size="2">
          <ion-label>
            Category
          </ion-label>
        </ion-col>
        <ion-col size="4">
          <select formControlName="categoryId" style="width:200px; padding: 10px;" (change)="selectCategory($event)">
            <option disabled>Select Category</option>
            <option [value]="val.id" *ngFor="let val of categories">
              {{val.name}}
            </option>
          </select>
        </ion-col>
        <ion-col size="2">
          <ion-label>
            Sub Category
          </ion-label>
        </ion-col>
        <ion-col size="4">
          <select formControlName="subCategoryId" style="width:200px; padding: 10px;">
            <option disabled>Select Sub Category</option>
            <option [value]="val.id" *ngFor="let val of subcategories">
              {{val.name}}
            </option>
          </select>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="2">
          <ion-label>
            Product Name
          </ion-label>
        </ion-col>
        <ion-col size="4">
          <ion-input formControlName="productName"></ion-input>
        </ion-col>
        <ion-col size="2">
          <ion-label>
            Country Of Origin
          </ion-label>
        </ion-col>
        <ion-col size="4">
          <ion-input formControlName="countryOfOrigin"></ion-input>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="2">
          <ion-label>
            Brand
          </ion-label>
        </ion-col>
        <ion-col size="4">
          <ion-input formControlName="brand"></ion-input>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="4">
          <ion-label>
            Description goes here...
          </ion-label>
        </ion-col>
        <ion-col size="8">
          <ion-textarea formControlName="description"></ion-textarea>
        </ion-col>
      </ion-row>
      <ion-button (click)="addWeight()">Add Weights</ion-button>
      <div formArrayName="listOfWeights" *ngFor="let item of w.controls;let i = index;">
        <div style="border: 1px solid grey;" [formGroupName]="i">
          <ion-row>
            <ion-col size="3">
              <ion-label>Image URL</ion-label>
            </ion-col>
            <ion-col size="6">
              <ion-input formControlName="imageURL"></ion-input>
            </ion-col>
            <ion-col size="2" offset="1">
              <ion-checkbox color="secondary" formControlName="default"></ion-checkbox>
              <ion-label>
                Default Weight
              </ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="2">
              <ion-label>
                Weight
              </ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-input type="number" formControlName="weight"></ion-input>
            </ion-col>
            <ion-col size="2">
              <ion-label>
                Select Unit
              </ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-select interface="popover" formControlName="unit" value="kg" class="myCustomSelect"
                formControlName="unit">
                <ion-select-option value="kg">Kg</ion-select-option>
                <ion-select-option value="g">Gram</ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="2">
              <ion-label>
                MRP
              </ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-input formControlName="originalPrice"></ion-input>
            </ion-col>
            <ion-col size="2">
              <ion-label>
                Price
              </ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-input formControlName="discountPrice"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size="2">
              <ion-label>
                Quantity
              </ion-label>
            </ion-col>
            <ion-col size="4">
              <ion-input formControlName="availableQuantity"></ion-input>
            </ion-col>
          </ion-row>
        </div>
      </div>
      <div class="ion-padding">
        <ion-button type="submit" expand="block">{{product ? 'Update Product': 'Add Product'}}</ion-button>
      </div>
    </ion-grid>
  </form>
</div>